{% extends 'base.html' %}
{% block title %}{{ config.PROJECT_NAME }} - Опрос{% endblock %}

{% block content %}

    <div class="row">
        <div class="col-12">
            <h4>Результат опроса</h4>
        </div>
    </div>

    <div class="row mt-2">
        <div class="col-12">
            <div class="card card-body">
                <div class="row">
                    <div class="col-12">
                        <b>{{ poll.question }}</b>
                        <br>
                        <span style="opacity: 0.7">{{ poll.create_date.strftime('%d.%m.%Y %H:%M') }}</span>
                    </div>
                </div>
                <hr>
                {% for answer in poll.result %}
                    <div class="row">
                        <div class="col-12">
                            {{ answer }} - {{ poll.result[answer] }}
                            <br>
                            <div class="progress mb-4">
                                <div class="progress-bar" role="progressbar" style="width: {{ poll.percents[answer] }}%" aria-valuenow="{{ poll.percents[answer] }}" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-12">
            <h4>Результаты по городам</h4>
        </div>
    </div>

    {% for tg_poll in poll.tg_polls %}
        <div class="row mt-2">
            <div class="col-12">
                <div class="card card-body">
                    <div class="row">
                        <div class="col-12">
                            <b>{{ tg_poll.city_name }}</b>
                        </div>
                    </div>
                    <hr>
                    {% for answer in tg_poll.options %}
                        <div class="row">
                            <div class="col-12">
                                {{ answer }} - {{ tg_poll.options[answer] }}
                                <br>
                                <div class="progress mb-4">
                                    <div class="progress-bar" role="progressbar" style="width: {{ tg_poll.options[answer] }}%" aria-valuenow="{{ tg_poll.options[answer] }}" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endfor %}

{% endblock %}


{% block script %}
    <script>

    </script>
{% endblock %}